<input type="text" id="target" placeholder="Enter target IP or domain">
<button onclick="saveTarget()">Save Target</button>
<p>Current Target: <span id="currentTarget"></span></p>

<script>
function saveTarget() {
    let target = document.getElementById("target").value;
    if (!target) {
        alert("Please enter a target.");
        return;
    }
    
    fetch("/save_target", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ target: target })
    })
    .then(response => response.json())
    .then(data => {
        alert(data.message);
        document.getElementById("currentTarget").innerText = target;
    });
}

// Fetch stored target on page load
fetch("/")
    .then(response => response.text())
    .then(html => {
        let parser = new DOMParser();
        let doc = parser.parseFromString(html, "text/html");
        let target = doc.querySelector("input#target").value;
        document.getElementById("currentTarget").innerText = target || "No target set";
    });
</script>

